on:
  push:
    branches:
      - hexo
name: Hexo CI
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: Clean
        uses: heowc/action-hexo@main
        with:
          args: clean
      - name: Generate
        uses: heowc/action-hexo@main
        with:
          args: generate
      - name: JC
        run: |
          cat index.html
      - name: Deploy to github.io
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.CI_TOKEN }}
          external_repository: inkdp/inkdp.github.io
          publish_branch: master
          publish_dir: ./public
#name: CI
#
#on:
#  push:
#    branches:
#      - hexo
#jobs:
#  build:
#    runs-on: ubuntu-latest
#
#    steps:
#      - name: Checkout source
#        uses: actions/checkout@v1
#        with:
#          ref: hexo
#      - name: Use Node.js ${{ matrix.node_version }}
#        uses: actions/setup-node@v1
#        with:
#          version: ${{ matrix.node_version }}
##      - name: Hexo Clean
##        uses: heowc/action-hexo@main
##        with:
##          args: clean
#      - name: Hexo Generate
#        uses: heowc/action-hexo@main
#        with:
#          args: generate
#      - name: Deploy to github.io
#        uses: peaceiris/actions-gh-pages@v3
#        with:
#          personal_token: ${{ secrets.CI_TOKEN }}
#          external_repository: inkdp/inkdp.github.io
#          publish_branch: master
#          publish_dir: ./public
#
##      - name: Setup hexo
##        env:
##          ACTION_DEPLOY_KEY: ${{ secrets.ACTION_DEPLOY_KEY }}
##        run: |
##          mkdir -p ~/.ssh/
##          echo "$ACTION_DEPLOY_KEY" > ~/.ssh/id_rsa
##          chmod 600 ~/.ssh/id_rsa
##          ssh-keyscan github.com >> ~/.ssh/known_hosts
##          git config --global user.email "inkdp@qq.com"
##          git config --global user.name "InkDP"
##          npm install hexo-cli -g
##          npm install
##      - name: Hexo deploy
##        run: |
##          hexo clean
##          hexo d
#
